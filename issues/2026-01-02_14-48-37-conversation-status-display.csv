"id","priority","phase","area","title","description","acceptance_criteria","test_mcp","review_initial_requirements","review_regression_requirements","dev_state","review_initial_state","review_regression_state","git_state","owner","refs","notes"
"CSD-000","P1","1","both","梳理执行状态枚举与触发点","完成执行链路阶段/触发事件清单并与前后端对齐，确定展示所需状态文案。","存在一份已评审的状态枚举与触发事件表（含阶段名、触发条件、来源事件/字段、展示文案），存储在仓库并被引用；会议确认无遗漏关键阶段。","AUTOE2E","命名与既有状态保持一致，避免破坏兼容；记录未覆盖场景及假设。","回归时抽查状态清单与实现映射一致，新增阶段无多余或缺失。","已完成","已完成","已完成","已提交","","plan/2026-01-02_14-34-00-conversation-status-display.md:16;docs/zh/guides/developer/chat-message-flow.md:32","picked_reason:先梳理状态枚举为后续实现定边界;done_at:2026-01-02"
"CSD-010","P1","2","backend","验证/补充后端状态信号","检查 Task/Bot WebSocket 与轮询数据的细粒度状态输出，补齐缺失字段。","后端事件流含所需字段（如 status_detail/phase），可在本地复现；新增字段通过单元/集成测试覆盖并通过。","AUTOSERVER","确保新增字段向后兼容（旧客户端忽略不报错），日志记录异常状态。","回归验证：现有客户端功能不受影响；错误事件能正确产生并被消费。","未开始","未开始","未开始","未提交","","plan/2026-01-02_14-34-00-conversation-status-display.md:17",""
"CSD-020","P1","3","backend","协议字段定义与兼容策略","确定 status_phase/progress/progress_text 等协议字段，并保证兼容旧版本。","API/WS 协议文档更新并落库；接口返回包含新字段且通过契约测试；旧客户端调用无异常。","AUTOSERVER","字段命名与类型稳定；错误码/降级策略明确；有版本说明。","回归：契约测试覆盖新增字段，升级/回滚场景验证通过。","未开始","未开始","未开始","未提交","","plan/2026-01-02_14-34-00-conversation-status-display.md:18",""
"CSD-030","P2","4","backend","进度计算策略实现","落地真实或阶段占比的进度算法并在后端输出。","真实进度可用时按步骤比例输出；无真实进度时采用阶段占比伪进度并在完成/失败收敛；单测覆盖进度收敛与边界。","AUTOSERVER","校验进度跳变平滑，无倒退/卡死；异常路径有默认值。","回归：长耗时任务与失败任务的进度行为符合预期。","未开始","未开始","未开始","未提交","","plan/2026-01-02_14-34-00-conversation-status-display.md:19",""
"CSD-040","P1","5","frontend","前端状态模型接入","在状态 store/useUnifiedMessages 接入新增字段，建立阶段到文案/图标/颜色/进度条的映射。","前端能正确解析新字段并驱动 UI；映射配置集中可测试；storybook/单测覆盖主要阶段。","AUTOFRONTEND","保持数据单一来源，不重复拉取；颜色/图标符合设计 tokens。","回归：旧状态流仍正常；无 undefined 闪烁或报错。","未开始","未开始","未开始","未提交","","plan/2026-01-02_14-34-00-conversation-status-display.md:20",""
"CSD-050","P1","6","frontend","状态提示组件与文案实现","实现顶部 banner 或卡片内 badge+线性进度条，展示阶段文案与进度。","UI 与设计稿一致；支持主要阶段文案（启动/拉取/执行/收尾）；在消息页展示且不遮挡内容；通过视觉回归或截图对比。","AUTOFRONTEND","组件可复用、受控属性清晰；遵守 shadcn/ui 与设计 tokens；交互在移动端可用。","回归：加载/更新/完成状态切换无抖动；无性能明显下降。","未开始","未开始","未开始","未提交","","plan/2026-01-02_14-34-00-conversation-status-display.md:21",""
"CSD-060","P1","7","both","回退与异常处理策略","对未知阶段、缺失 progress、错误状态提供降级显示与重试/日志入口。","未知阶段降级为“执行中”；缺失进度仅显示文案无报错；错误态出现可点击查看日志/重试；对应用例通过前端单测+后端模拟。","AUTOE2E","确认错误与降级路径的可观测性（日志/提示）；无额外阻塞交互。","回归：异常流（网络断开、后端返回未知字段）行为符合设计。","未开始","未开始","未开始","未提交","","plan/2026-01-02_14-34-00-conversation-status-display.md:22",""
"CSD-070","P1","8","both","测试覆盖与自动化","补充前端单测/Story，后端单测/集成，必要时 E2E 覆盖阶段与进度。","前端测试通过（npm test / storybook screenshot 如有）；后端 uv run pytest 相关用例通过；E2E（如有）能验证阶段/进度串联。","AUTOE2E","测试描述清晰、可重复；覆盖新增字段与降级逻辑；无硬编码依赖。","回归：CI 全绿；关键用例可重复执行。","未开始","未开始","未开始","未提交","","plan/2026-01-02_14-34-00-conversation-status-display.md:23",""
"CSD-080","P2","9","both","文档更新","更新 chat-message-flow 及 UX 文档记录新增状态/进度字段与文案策略。","相关文档段落已更新并提交；包含字段说明、示例 payload、前端映射策略；链接可用。","AUTOFRONTEND","文档与实现一致，注明兼容性与版本；语言简洁。","回归：文档检查无死链，示例可被现实现验证。","未开始","未开始","未开始","未提交","","plan/2026-01-02_14-34-00-conversation-status-display.md:24",""
"CSD-090","P1","10","frontend","系统提示词展示模块","在对话 UI 新增可折叠系统提示词区域，支持复制与滚动展示。","侧栏或前置卡片能展示系统提示词，默认收起；长文可滚动；提供复制按钮；通过前端交互测试/截图。","AUTOFRONTEND","信息不泄露到消息流；遵守 i18n/可访问性要求；使用现有组件或 tokens。","回归：提示词缺失时优雅降级；暗/亮主题样式一致。","未开始","未开始","未开始","未提交","","plan/2026-01-02_14-34-00-conversation-status-display.md:25",""
"CSD-100","P1","11","frontend","文件变更页重构","重设文件变更页面排版与主题，使其与设计系统一致并更美观。","新样式符合设计系统 tokens；支持 diff 折叠/文件筛选；空状态友好；通过视觉或截图基线；关键交互无控制台报错。","AUTOFRONTEND","避免内联样式，优先复用组件库；确保响应式与可读性；性能不下降明显。","回归：旧数据集展示正常；深浅色主题检查通过。","未开始","未开始","未开始","未提交","","plan/2026-01-02_14-34-00-conversation-status-display.md:26",""
